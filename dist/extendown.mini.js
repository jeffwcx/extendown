/*!
 * extendown v0.1.0
 * author jeffwang <cunxuanwang@163.com>
 */
!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Extendown=t():n.Extendown=t()}(this,function(){return function(n){function t(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return n[e].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=n,t.c=r,t.i=function(n){return n},t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:e})},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=16)}([function(n,t,r){"use strict";function e(n,t){return n.replace(t,function(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];return y[t.source]||(y[t.source]=[]),y[t.source].push(r),""})}function i(n){var t=n;return b.a.forEach(function(r){r.pre&&(t=e(n,r.pre))}),b.b.forEach(function(r){r.pre&&(t=e(n,r.pre))}),t=r.i(m.a)(t)}function u(n){var t=n||"";return t=String(t),x.forEach(function(n){var r=new RegExp(n.reg,"g");t=t.replace(r,n.replace),r=null}),t}function o(n){return n.replace(/[<>]/g,function(n){return"<"===n?"&lt;":"&gt;"})}function a(n){var t=n||"";return t=String(t),b.a.forEach(function(n){n.reg?t.match(n.reg)&&(t=n.process(t)):t=n.process(t)}),t}function c(n,t){for(var r=1,e=0,i=!1;r<n.length&&e<w.length;r+=w[e],e+=1)if(void 0!==n[r]){i=!0;break}return i?b.b[e].process(n[0],t):n[0]}function s(n){return"\n"===n[0]?n[0]:""}function f(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];var i=r;return r.forEach(function(n,t){i[t]=u(n)}),n.apply(void 0,i)}function l(n){for(var t=[],r=0,e=0;e<n.length;e+=1){var i=n[e];if("("===i){var u=n.substr(e+1,2);e>=1&&"\\"===n[e-1]||"?:"===u||"?="===u||"?!"===u||t.push(i)}")"===i&&(e>=1&&"\\"===n[e-1]||"("===t.slice(-1)[0]&&(t.pop(),r+=1))}return r}function p(n){var t=/\\(\d)/g,r=0;return null===n.match(t)?n:(r=w.reduce(function(n,t){return n+t},r),n.replace(t,function(n,t){return"\\"+(r+parseInt(t,10))}))}function h(){return w=[],y={},b.b.reduce(function(n,t){if(t.reg){var r=p(t.reg),e=l(t.reg);return w.push(e),n?n+"|(?:"+r+")":"(?:"+r+")"}return n},"")}function g(){return y}function d(n,t){var r=n;if(r instanceof Array){for(var e=0,i=r.length,u=!0,o=0;o<r.length;o+=1)if(r[o]&&(!t||!t(r[o]))){e=o,u=!1;break}for(var a=r.length-1;a>0;a-=1)if(r[a]&&(!t||!t(r[a]))){i=a;break}return u?[]:r.slice(e,i+1)}return r}function v(n){return r.i(m.b)(n)}r.d(t,"j",function(){return c}),r.d(t,"d",function(){return a}),r.d(t,"h",function(){return h}),r.d(t,"g",function(){return s}),r.d(t,"i",function(){return i}),r.d(t,"b",function(){return g}),r.d(t,"e",function(){return u}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return f}),r.d(t,"f",function(){return d}),r.d(t,"k",function(){return v});var b=r(3),m=r(4),w=[],y={},x=[{reg:"&(?!\\w+;)",replace:"&amp;"},{reg:"©",replace:"&copy;"},{reg:"®",replace:"&reg;"},{reg:"(<\\/?\\w+(?:[\\s]+\\w+(?:=(?:\".*\"|'.*'))*)*[\\s]*\\/?>)|(<)|(>)",replace:function(n,t,r,e){return r?"&lt;":e?"&gt;":n}}]},function(n,t,r){"use strict";t.a={emoji:{path:"https://www.webpagefx.com/tools/emoji-cheat-sheet/graphics/emojis/",ext:"png",nameFormat:function(n){return n}}}},function(n,t,r){"use strict";function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r(0),u=r(7),o=function(){function n(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),a=function(){function n(t,r){e(this,n),this.html="",this.nowrap=r,this.source=t.replace(/\r\n^/gm,"\n"),this.frontFlag=0,this.behindFlag=0,this.lastIndex=0,this.process()}return o(n,[{key:"process",value:function(){this.reg=new RegExp(r.i(i.h)(),"g"),this.source=r.i(i.i)(this.source);var t=this.reg.exec(this.source);for(t||(this.html=n.processOtherBlock(this.source,this.nowrap));null!==t;){if(this.frontFlag=this.lastIndex,this.behindFlag=t.index,this.lastIndex=this.reg.lastIndex,t&&"\n"===t[0].slice(-1)&&(this.reg.lastIndex-=1,this.lastIndex-=1),this.frontFlag<this.behindFlag){var e=this.source.substring(this.frontFlag,this.behindFlag),u=n.processOtherBlock(e,this.nowrap);this.html+=u}if(this.html+=String(r.i(i.j)(t,this.source)),!(t=this.reg.exec(this.source))){var o=this.source.substring(this.lastIndex),a=n.processOtherBlock(o,this.nowrap);this.html+=a}}this.html=r.i(i.k)(this.html)}},{key:"getHTML",value:function(){return this.html}}],[{key:"processOtherBlock",value:function(n,t){return n.replace(/^(\n*)([\s\S]*)$/g,function(n,e,i){return i?""+(e||"")+(r.i(u.a)(i,t)||""):""+(e||"")})}}]),n}();t.a=a},function(n,t,r){"use strict";r.d(t,"b",function(){return h}),r.d(t,"a",function(){return g});var e=r(6),i=r(8),u=r(5),o=r(9),a=r(14),c=r(13),s=r(12),f=r(15),l=r(11),p=r(10),h=[],g=[];h.push(e.a),h.push(i.a),h.push(u.a),h.push(o.a),g.push(a.a),g.push(c.a),g.push(s.a),g.push(f.a),g.push(l.a),g.push(p.a)},function(n,t,r){"use strict";function e(){return""+Date.now()+(parseInt(900*Math.random(),10)+100)}function i(n){var t=n;return Object.keys(o).forEach(function(n){t=t.replace(n,o[n])}),t}function u(n){return n.replace(a,function(n,t){var r=e();return o[r]=t,r})}r.d(t,"a",function(){return u}),r.d(t,"b",function(){return i});var o={},a=/\\([\\`*_{}[\]()#+\-.!:])/g},function(n,t,r){"use strict";function e(n,t){return'<pre><code class="code_language_'+n+'">'+t+"</code></pre>"}function i(n){var t=new RegExp(o,"g"),i=r.i(u.g)(n);return n.replace(t,function(n,t,o,a){return i+r.i(u.a)(e,o||"",r.i(u.c)(a)||"")})}var u=r(0),o="(?:^|\\n)[\\t ]*?([`]{3,})(?:[\\t ]+(\\w*))?\n((?:(?!\\1).*\\n)*)\\1[\\t ]*?(?=\n|$)";t.a={reg:o,process:i}},function(n,t,r){"use strict";function e(n,t){return"<h"+n+">"+t+"</h"+n+">"}function i(n){var t=new RegExp(o,"g"),i=r.i(u.g)(n);return n.replace(t,function(n,t,o){var a="";return o&&(a=r.i(u.d)(r.i(u.e)(o))),i+e(t.length,a)})}var u=r(0),o="(?:^|\\n)(?:[\\t ]*?)(#{1,6})\\s+(.*)(?:\\n|$)";t.a={reg:o,process:i}},function(n,t,r){"use strict";function e(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)}function i(n,t){return new f.a(n,t).getHTML()}function u(){}function o(n){var t=/(?:^|\n)([\t ]+)/g,r=t.exec(n),e=n;if(r){var i=r[1].length,u=new RegExp("(?:^|\n)([\\t ]{"+i+"})","g");e=n.replace(u,"\n")}return e}function a(n,t){var r=[];return n&&r.push(n),t&&r.push.apply(r,e(t.split(/\n[\t ]*\n(?=[ ]{3,})/).filter(function(n){return!!n}).map(function(n){return i(o(n))}))),r}function c(n,t){var e=n;return e?(e=e.replace(/^\n[\t \n]*/,""),t?r.i(l.d)(r.i(l.e)(e)):"<p>"+r.i(l.d)(r.i(l.e)(e))+"</p>"):""}function s(n,t){var r=null,e="",s=new RegExp(p,"g");if(!(r=s.exec(n)))return e=c(n,t);for(var f=0,l=s.lastIndex,h=l-r[0].length,g="",d="",v=new u;null!=r;){var b=r[1],m=r[2],w=r[3],y=r[4],x=void 0,E=void 0;"+"===b||"-"===b||"*"===b?x="ul":">"===b?x="blockquote":(x="ol",E=b.replace(".","")),(x!==g||f!==h||"ul"===x&&b!==d)&&(g&&(e+=v.get()),v.create(x,E)),e+=c(n.substring(f,h)),m=o(m),m=w?i(m):i(m,!0),w&&"blockquote"!==x?v.add("block",a(null,w),m):!w&&m&&"blockquote"!==x?/\n[\t ]*\n/.test(y)?v.add("block",m):v.add("inline",m):"blockquote"===x&&v.add("blockquote",a(null,w),m),r=s.exec(n),r?(g=x,d=b,f=l,l=s.lastIndex,h=l-r[0].length):(e+=v.get(),e+=c(n.substring(l)))}return e}var f=r(2),l=r(0),p="(?:^|\\n)[\\t ]{0,2}(\\d+\\.|[+\\-*>])[\\t ]+?([\\s\\S]*?)((?:\\n[\\t ]*\\n[ ]{3,}[\\s\\S]*?)*)(?=\\n[\\t ]{0,2}(?:\\d+\\.|[+\\-*>])|(\\n[\\t ]*\\n)|$)";u.prototype.create=function(n,t){this._type=n,this._start=t,this._content=[]},u.prototype.add=function(n,t,r){var e="";"inline"===n?e="<li>"+t+"</li>":"block"===n?e=t instanceof Array?"<li>"+(r||"")+t.map(function(n){return n}).join("")+"</li>":"<li>"+(r||"")+t+"</li>":"blockquote"===n&&(e=t instanceof Array&&t.length>0?""+(r||"")+t.map(function(n){return"<p>"+n+"</p>"}).join(""):r),this._content.push(e)},u.prototype.get=function(){return"ul"===this._type||"ol"===this._type?"<"+this._type+(this._start&&this._start>0?' start="'+this._start+'"':"")+">"+this._content.join("")+"</"+this._type+">":"<"+this._type+"><p>"+this._content.join("\n")+"</p></"+this._type+">"},t.a=s},function(n,t,r){"use strict";function e(n){var t=new RegExp(i,"g");return n.replace(t,function(n,t){return(t||"")+"<hr></hr>"})}var i="(^|\\n)[\\t ]*?([*|-][\\t ]*){3,}?(?:\\n|$)";t.a={reg:i,process:e}},function(n,t,r){"use strict";function e(n,t){return"<table>\n    <thead>\n      <tr>\n      "+n.map(function(n){return"<th"+(n.align&&' align="'+n.align+'"')+">"+n.colName+"</th>"}).join("")+"\n      </tr>\n    </thead>\n    <tbody>\n      "+t.map(function(t){return"<tr>"+n.map(function(n,r){return"<td"+(n.align&&' align="'+n.align+'"')+">"+t[r]+"</td>"}).join("")+"</tr>"}).join("")+"\n    </tbody>\n  </table>"}function i(n){return/^\s*$/g.test(n)}function u(n){var t=new RegExp(a,"g");return n.replace(t,function(n,t,u,a){var c=u.split("|"),s=t.split("|"),f=a.split("\n");if(c=r.i(o.f)(c,i),s=r.i(o.f)(s),f=r.i(o.f)(f),c.length>1){for(var l=[],p=[],h=!1,g=0;g<c.length;g+=1){var d=c[g],v=s[g];if(!d){h=!0;break}d=d.trim();var b=":"===d.substr(0,1),m=":"===d.substr(-1),w="";b&&!m?w="left":!b&&m?w="right":b&&m&&(w="center"),l.push({colName:r.i(o.d)(v.trim()),align:w})}if(h)return n;f=r.i(o.f)(f,i);for(var y=0;y<f.length;y+=1){var x=f[y].split("|");x=r.i(o.f)(x),x=x.map(function(n){return r.i(o.d)(n.trim())}),p.push(x)}return e(l,p)}return n})}var o=r(0),a="(?:^|\\n)([^|\\n]*(?:\\|[^|\\n]*)+\\|?)\\n((?:\\:?-{3,}\\:?)?(?:[\\t ]*\\|[\\t ]*(?:\\:?-{3,}\\:?)?)+[\\t ]*\\|?)((?:\\n[^|\n]*(?:\\|[^|\n]*)+\\|?)*)";t.a={reg:a,process:u}},function(n,t,r){"use strict";function e(n){var t=new RegExp(i,"g");return n.replace(t,"<br />")}var i="[ ]{2}(\\n|$)";t.a={reg:i,process:e}},function(n,t,r){"use strict";function e(n,t){return'<img alt="'+t+'" width="20" height="20" src="'+o.a.emoji.path+o.a.emoji.nameFormat(n)+"."+o.a.emoji.ext+'">'}function i(n){var t=new RegExp(a,"g");return n.replace(t,function(n,t){return r.i(u.a)(e,t,n)})}var u=r(0),o=r(1),a=":([\\w\\d\\+-]+):";t.a={reg:a,process:i}},function(n,t,r){"use strict";function e(n,t,r){return"<img"+(n&&' alt="'+n+'"')+(r&&' title="'+r+'"')+' src="'+(t||"")+'" />'}function i(n,t,r){return"<a"+(r&&' title="'+r+'"')+' href="'+(t||"")+'" target="_blank">'+(n||"")+"</a>"}function u(n){var t=new RegExp(a,"g");return n.replace(t,function(n,t,u,a,s){if(void 0===s){var f=[];return a&&(f=a.split(/[\t ]+/)),f[1]&&(f[1]=f[1].replace(/["']/g,"")),t?r.i(o.a)(e,u,f[0],f[1]):r.i(o.a)(i,u,f[0],f[1])}var l=r.i(o.b)()[c]||[];if(""===s)for(var p=0;p<l.length;p+=1){var h=l[p];if(h[1].toLowerCase()===u.toLowerCase())return t?r.i(o.a)(e,u,h[2],h[4]):r.i(o.a)(i,u,h[2],h[4])}else for(var g=0;g<l.length;g+=1){var d=l[g];if(d[1].toLowerCase()===s.toLowerCase())return t?r.i(o.a)(e,u,d[2],d[4]):r.i(o.a)(i,u,d[2],d[4])}return n})}var o=r(0),a="(?:(!)?\\[([^\\[\\n]*)\\](?:(?:\\(([^\\(\\n)]*)\\))|(?:\\[([^\\(\\n)]*)\\])))",c="^\\s{0,3}\\[([^\\n\\[]+)\\]:[\\t ]+<?(.+)>?[\\t ]+\\n?[\\t ]*(?:(?:([\"'])(.*?)\\3)?|(?:\\(.*?\\))?)[\\t ]*$";t.a={pre:new RegExp(c,"mg"),reg:a,process:u}},function(n,t,r){"use strict";function e(n){return"<code>"+n+"</code>"}function i(n){var t=[];return n.split("\n").map(function(n){for(var i=0,a=0,c=0,s=0,f="",l=0;l<n.length;l+=1)if(n[l]===o&&(0===t.length||1===t.length)){var p="";if(0===t.length){for(i=l,s=l,f+=n.substring(c,s),c=s;n[l]===o;)p+=o,l+=1;t.push(p)}else{for(;n[l]===o;)p+=o,l+=1;if(p===t[0]){a=l;var h=a-i,g=h-2*t[0].length;if(g>0){var d=r.i(u.a)(e,r.i(u.c)(n.substr(i+t[0].length,g)));f+=d,c=a,t.pop()}}}l-=1}return f+=n.substr(c)}).join("\n")}var u=r(0),o="`";t.a={process:i}},function(n,t,r){"use strict";function e(n,t){return"<"+n+">"+t+"</"+n+">"}function i(n){var t=new RegExp(o,"g");return n.replace(t,function(n,t,i){var o=void 0;return o=1===t.length?"em":"strong",e(o,r.i(u.d)(r.i(u.e)(i)))})}var u=r(0),o="([*_]{1,2})(?![\\t ])([\\s\\S]*?[^ \\t])\\1";t.a={reg:o,process:i}},function(n,t,r){"use strict";function e(n){return'<span style="text-decoration:line-through">'+(n||"")+"</span>"}function i(n){var t=new RegExp(o,"g");return n.replace(t,function(n,t){return r.i(u.a)(e,t.replace("\n"," "))})}var u=r(0),o="(?:~~)(?![\\t \\n])([^\\n]*?\\n?[^\\n]*?[^\\t \\n])(?:~~)";t.a={reg:o,process:i}},function(n,t,r){"use strict";function e(n){return new u.a(n).getHTML()}function i(n,t){if(!t||"function"!=typeof t.process)throw new TypeError("The feature param must exist and process property must be a function");if(n===c)a.a.push(t);else{if(n!==s)throw new TypeError("Do not support such a type to extend!");if("string"!=typeof t.reg)throw new TypeError('The Block feature\'s "reg" property must be string');a.b.push(t)}}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"parse",function(){return e}),r.d(t,"extend",function(){return i}),r.d(t,"INLINE",function(){return c}),r.d(t,"BLOCK",function(){return s});var u=r(2),o=r(1),a=r(3);r.d(t,"Extendown",function(){return u.a}),r.d(t,"config",function(){return o.a});var c="inline",s="block"}])});