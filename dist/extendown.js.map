{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cd6d911509ea56b78533","webpack:///./src/helper.js","webpack:///./src/config.js","webpack:///./src/core.js","webpack:///./src/features/index.js","webpack:///./src/escape.js","webpack:///./src/features/block/BlockCode.js","webpack:///./src/features/block/Head.js","webpack:///./src/features/block/List.js","webpack:///./src/features/block/SplitLine.js","webpack:///./src/features/block/Table.js","webpack:///./src/features/inline/Br.js","webpack:///./src/features/inline/Emoji.js","webpack:///./src/features/inline/ImageLink.js","webpack:///./src/features/inline/InlineCode.js","webpack:///./src/features/inline/ItaticBold.js","webpack:///./src/features/inline/Strikethrough.js","webpack:///./src/index.js"],"names":["trapArr","preDefined","preprocessCall","source","reg","replace","args","push","preProcess","md","inline","forEach","obj","pre","block","preEscape","htmlEncoding","match","g1","g2","g3","processHTMLEncoding","result","String","rep","RegExp","htmlEncode","processInline","process","processBlock","index","i","isMatch","length","undefined","processLineBreak","htmlTemplate","func","params","arg","countTrapGroup","regStr","brackets","count","nowChar","unTrapTag","substr","slice","pop","getRealReferCount","trapReferReg","allCount","reduce","all","value","refer","parseInt","mergeRegStr","getPredefined","trimForArray","condition","array","Array","contentStart","contentEnd","isAllEmpty","j","postProcess","escape","emoji","path","ext","nameFormat","name","Extendown","nowrap","html","frontFlag","behindFlag","lastIndex","exec","processOtherBlock","otherBlock","substring","lastPart","mat","m1","m2","processList","map","escapeReg","generateUniqueStr","Date","now","Math","random","keys","Object","key","uniqueStr","getHTML","language","content","processBlockCode","section","prefix","m3","level","processHead","regForList","parse","factory","CreateTemplate","prototype","create","type","start","_type","_start","_content","add","str","join","get","backspace","spaceNum","spaceReg","makeContent","inlineContent","blockContent","split","filter","unmatchedString","string","nowIndex","frontIndex","lastType","lastSymbol","template","symbol","suffix","test","processSplitLine","cols","rows","col","align","colName","row","trimBlank","item","processTable","colNames","colInfo","rowsInfo","hasEmpty","colStyle","trim","left","right","rowArr","processBr","config","processEmoji","referReg","getImage","alt","src","title","getLink","text","href","processImageLink","m4","arr","matchArr","tmp","toLowerCase","TAG","codeTemplate","processInlineCode","lines","line","end","first","last","contentNum","processItaticBold","processStrikeThrough","Parser","INLINE","BLOCK","extend","feature","TypeError"],"mappings":"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","file":"extendown.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Extendown\"] = factory();\n\telse\n\t\troot[\"Extendown\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cd6d911509ea56b78533","/**\n * Helper functions for Extendown Class\n * Also have public state over here\n * Includes Capture Group Count Array\n * PreDefined Array, BlockRegex ...\n */\n\nimport { block, inline } from './features/';\nimport { preEscape, escape } from './escape';\n\nlet trapArr = [];\nlet preDefined = {};\n\nfunction preprocessCall(source, reg) {\n  return source.replace(reg, (...args) => {\n    if (!preDefined[reg.source]) preDefined[reg.source] = [];\n    preDefined[reg.source].push(args);\n    return '';\n  });\n}\n\n\nfunction preProcess(source) {\n  let md = source;\n  inline.forEach((obj) => {\n    // if feature have predefined\n    if (obj.pre) {\n      md = preprocessCall(source, obj.pre);\n    }\n  });\n  block.forEach((obj) => {\n    if (obj.pre) {\n      md = preprocessCall(source, obj.pre);\n    }\n  });\n  md = preEscape(md);\n  return md;\n}\n\n\nconst htmlEncoding = [{\n  reg: '&(?!\\\\w+;)',\n  replace: '&amp;',\n}, {\n  reg: '©',\n  replace: '&copy;',\n}, {\n  reg: '®',\n  replace: '&reg;',\n}, {\n  reg: '(<\\\\/?\\\\w+(?:[\\\\s]+\\\\w+(?:=(?:\".*\"|\\'.*\\'))*)*[\\\\s]*\\\\/?>)|(<)|(>)',\n  replace(match, g1, g2, g3) {\n    if (g2) return '&lt;';\n    else if (g3) return '&gt;';\n    return match;\n  },\n},\n];\n\n/**\n * process markdown source before parse\n * usually used in predefined statement\n * @param {String} source - MarkDown String Source\n * @return {String} The String After The Source Transformed\n * @ignore\n */\nfunction processHTMLEncoding(source) {\n  let result = source || '';\n  result = String(result);\n  htmlEncoding.forEach((rep) => {\n    let reg = new RegExp(rep.reg, 'g');\n    result = result.replace(reg, rep.replace);\n    reg = null;\n  });\n  return result;\n}\n\nfunction htmlEncode(source) {\n  return source.replace(/[<>]/g, (match) => {\n    if (match === '<') return '&lt;';\n    return '&gt;';\n  });\n}\n\nfunction processInline(md) {\n  let source = md || '';\n  source = String(source);\n  inline.forEach((obj) => {\n    if (obj.reg) {\n      if (source.match(obj.reg)) {\n        source = obj.process(source);\n      }\n    } else {\n      // for inline tag, allowed to process inline without regex\n      source = obj.process(source);\n    }\n  });\n  return source;\n}\n\nfunction processBlock(match, source) {\n  let index = 1;\n  let i = 0;\n  let isMatch = false;\n  for (; index < match.length && i < trapArr.length; index += trapArr[i], i += 1) {\n    if (match[index] !== undefined) {\n      isMatch = true;\n      break;\n    }\n  }\n  if (!isMatch) return match[0];\n  return block[i].process(match[0], source);\n}\n\nfunction processLineBreak(source) {\n  if (source[0] === '\\n') return source[0];\n  return '';\n}\n\n\nfunction htmlTemplate(func, ...args) {\n  const params = args;\n  args.forEach((arg, index) => {\n    params[index] = processHTMLEncoding(arg);\n  });\n  return func(...params);\n}\n\n\n// function makeRegUntrapped(regStr) {\n//   const reg = /(\\\\)?\\((\\?:)?/g;\n//   return regStr.replace(reg, (match, prefix) => {\n//     if (prefix === '\\\\' || match === '(?:') return match;\n//     return '(?:';\n//   });\n// }\n\nfunction countTrapGroup(regStr) {\n  const brackets = [];\n  let count = 0;\n  for (let i = 0; i < regStr.length; i += 1) {\n    const nowChar = regStr[i];\n    if (nowChar === '(') {\n      const unTrapTag = regStr.substr(i + 1, 2);\n      if (!((i >= 1 && regStr[i - 1] === '\\\\')\n      || unTrapTag === '?:'\n      || unTrapTag === '?='\n      || unTrapTag === '?!')) {\n        brackets.push(nowChar);\n      }\n    }\n\n    if (nowChar === ')') {\n      if (!(i >= 1 && regStr[i - 1] === '\\\\')) {\n        if (brackets.slice(-1)[0] === '(') {\n          brackets.pop();\n          count += 1;\n        }\n      }\n    }\n  }\n  return count;\n}\n\nfunction getRealReferCount(regStr) {\n  const trapReferReg = /\\\\(\\d)/g;\n  let allCount = 0;\n  if (regStr.match(trapReferReg) === null) return regStr;\n  allCount = trapArr.reduce((all, value) => all + value, allCount);\n  return regStr.replace(trapReferReg, (match, refer) =>\n      `\\\\${(allCount + parseInt(refer, 10))}`);\n}\n\n\nfunction mergeRegStr() {\n  trapArr = [];\n  preDefined = {}; // state init\n  return block.reduce((all, obj) => {\n    if (obj.reg) {\n      // check trap refer\n      const regStr = getRealReferCount(obj.reg);\n      // get the current regex string's trap group number\n      const count = countTrapGroup(obj.reg);\n      trapArr.push(count);\n      if (!all) {\n        return `(?:${regStr})`;\n      }\n      return `${all}|(?:${regStr})`;\n    }\n    return all;\n  }, '');\n}\n\n\nfunction getPredefined() {\n  return preDefined;\n}\n\nfunction trimForArray(source, condition) {\n  const array = source;\n  if (array instanceof Array) {\n    let contentStart = 0;\n    let contentEnd = array.length;\n    let isAllEmpty = true;\n    for (let i = 0; i < array.length; i += 1) {\n      if (array[i] && (condition ? !condition(array[i]) : true)) {\n        contentStart = i;\n        isAllEmpty = false;\n        break;\n      }\n    }\n    for (let j = array.length - 1; j > 0; j -= 1) {\n      if (array[j] && (condition ? !condition(array[j]) : true)) {\n        contentEnd = j;\n        break;\n      }\n    }\n    if (isAllEmpty) {\n      return [];\n    }\n    return array.slice(contentStart, contentEnd + 1);\n  }\n  return array;\n}\n\n\nfunction postProcess(source) {\n  return escape(source);\n}\n\nexport {\n  processBlock,\n  processInline,\n  mergeRegStr,\n  processLineBreak,\n  preProcess,\n  getPredefined,\n  processHTMLEncoding,\n  htmlEncode,\n  htmlTemplate,\n  trimForArray,\n  postProcess,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/helper.js","/**\n * config for Extendown\n */\nexport default {\n  // for emoji\n  emoji: {\n    path: 'https://www.webpagefx.com/tools/emoji-cheat-sheet/graphics/emojis/',\n    ext: 'png',\n    /**\n     * format name as you like\n     */\n    nameFormat(name) {\n      return name;\n    },\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","/**\n * itegrate all features of extendown\n * @module  core module\n * @author jeffone cunxuanwang@163.com\n */\n\nimport { processBlock, mergeRegStr, preProcess, postProcess } from './helper';\nimport processList from './features/block/List';\n/** Class Extendown */\nclass Extendown {\n  constructor(md, nowrap) {\n    this.html = '';\n    this.nowrap = nowrap;\n    this.source = md.replace(/\\r\\n^/gm, '\\n');\n    this.frontFlag = 0;\n    this.behindFlag = 0;\n    this.lastIndex = 0;\n    this.process();\n  }\n\n  process() {\n    this.reg = new RegExp(mergeRegStr(), 'g');\n    // preprocess\n    this.source = preProcess(this.source);\n    let match = this.reg.exec(this.source);\n    if (!match) {\n      this.html = Extendown.processOtherBlock(this.source, this.nowrap);\n    }\n    for (;match !== null;) {\n      this.frontFlag = this.lastIndex;\n      this.behindFlag = match.index;\n      this.lastIndex = this.reg.lastIndex;\n      // do not eat the last char \\n\n      if (match && match[0].slice(-1) === '\\n') {\n        this.reg.lastIndex -= 1;\n        this.lastIndex -= 1;\n      }\n      if (this.frontFlag < this.behindFlag) {\n        // these blocks do not match any block regexs\n        // just process them inline and wrap them with <p></p>\n        const otherBlock = this.source.substring(this.frontFlag, this.behindFlag);\n        const result = Extendown.processOtherBlock(otherBlock, this.nowrap);\n        this.html += result;\n      }\n      this.html += String(processBlock(match, this.source));\n      match = this.reg.exec(this.source);\n      // add the last unmatch part of source to html\n      if (!match) {\n        const lastPart = this.source.substring(this.lastIndex);\n        const result = Extendown.processOtherBlock(lastPart, this.nowrap);\n        this.html += result;\n      }\n    }\n\n    this.html = postProcess(this.html);\n  }\n  // process list,quote block and unmatched block\n  static processOtherBlock(source, nowrap) {\n    return source.replace(/^(\\n*)([\\s\\S]*)$/g, (mat, m1, m2) => {\n      if (m2) {\n        return `${m1 || ''}${processList(m2, nowrap) || ''}`;\n      }\n      return `${m1 || ''}`;\n    });\n  }\n  getHTML() {\n    return this.html;\n  }\n\n}\n\nexport default Extendown;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","/**\n * return a array contains all features of extendown\n */\nimport Head from './block/Head';\nimport SplitLine from './block/SplitLine';\nimport BlockCode from './block/BlockCode';\nimport Table from './block/Table';\nimport ItaticBold from './inline/ItaticBold';\nimport InlineCode from './inline/InlineCode';\nimport ImageLink from './inline/ImageLink';\nimport Strikethrough from './inline/Strikethrough';\nimport Emoji from './inline/Emoji';\nimport Br from './inline/Br';\n\nconst block = [];\nconst inline = [];\n\nblock.push(Head);\nblock.push(SplitLine);\nblock.push(BlockCode);\nblock.push(Table);\n\ninline.push(ItaticBold);\ninline.push(InlineCode);\ninline.push(ImageLink);\ninline.push(Strikethrough);\ninline.push(Emoji);\ninline.push(Br);\n\nexport { block, inline };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/index.js","\n/**\n * escape functions\n */\n\n\nconst map = {};\nconst escapeReg = /\\\\([\\\\`*_{}[\\]()#+\\-.!:])/g;\n\n\n/**\n * generate unique string\n * @return {String} Unique String\n */\nfunction generateUniqueStr() {\n  return `${Date.now()}${(parseInt(Math.random() * 900, 10) + 100)}`;\n}\n\n\n/**\n * Escape for markdown string\n * @param {String} source - markdown string\n * @return {String} the string after escaping\n */\nfunction escape(source) {\n  let result = source;\n  const keys = Object.keys(map);\n  keys.forEach((key) => {\n    result = result.replace(key, map[key]);\n  });\n  return result;\n}\n\n\n/**\n * preprocess before escape\n * @param {String} source - markdown string\n * @return {String} preEscape string\n */\nfunction preEscape(source) {\n  return source.replace(escapeReg, (match, g1) => {\n    const uniqueStr = generateUniqueStr();\n    map[uniqueStr] = g1;\n    return uniqueStr;\n  });\n}\n\nexport {\n  preEscape,\n  escape,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/escape.js","/**\n * transform BlockCode\n */\nimport { processLineBreak, htmlTemplate, htmlEncode } from '../../helper';\n\nconst regStr = '(?:^|\\\\n)[\\\\t ]*?([`]{3,})(?:[\\\\t ]+(\\\\w*))?\\n((?:(?!\\\\1).*\\\\n)*)\\\\1[\\\\t ]*?(?=\\n|$)';\n\nfunction getHTML(language, content) {\n  return `<pre><code class=\"code_language_${language}\">${content}</code></pre>`;\n}\n\nfunction processBlockCode(section) {\n  const reg = new RegExp(regStr, 'g');\n  const prefix = processLineBreak(section);\n  return section.replace(reg, (match, m1, m2, m3) => prefix + htmlTemplate(getHTML, m2 || '', htmlEncode(m3) || ''));\n}\n\n\nexport default { reg: regStr, process: processBlockCode };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/block/BlockCode.js","/**\n * transform #{1,6} to h1-h6\n */\nimport { processInline, processLineBreak, processHTMLEncoding } from '../../helper';\n\nconst regStr = '(?:^|\\\\n)(?:[\\\\t ]*?)(#{1,6})\\\\s+(.*)(?:\\\\n|$)';\n\nfunction getHTML(level, content) {\n  return `<h${level}>${content}</h${level}>`;\n}\n\nfunction processHead(section) {\n  const reg = new RegExp(regStr, 'g');\n  const prefix = processLineBreak(section);\n  return section.replace(reg, (match, m1, m2) => {\n    let content = '';\n    if (m2) content = processInline(processHTMLEncoding(m2));\n    return prefix + getHTML(m1.length, content);\n  });\n}\n\nexport default { reg: regStr, process: processHead };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/block/Head.js","/**\n * transform list\n */\n\nimport Extendown from '../../core';\nimport { processInline, processHTMLEncoding } from '../../helper';\n\nconst regForList = '(?:^|\\\\n)[\\\\t ]{0,2}(\\\\d+\\\\.|[+\\\\-*>])[\\\\t ]+?([\\\\s\\\\S]*?)((?:\\\\n[\\\\t ]*\\\\n[ ]{3,}[\\\\s\\\\S]*?)*)(?=\\\\n[\\\\t ]{0,2}(?:\\\\d+\\\\.|[+\\\\-*>])|(\\\\n[\\\\t ]*\\\\n)|$)';\n\nfunction parse(source, nowrap) {\n  const factory = new Extendown(source, nowrap);\n  return factory.getHTML();\n}\n\nfunction CreateTemplate() {\n}\nCreateTemplate.prototype.create = function create(type, start) {\n  this._type = type;\n  this._start = start;\n  this._content = [];\n};\nCreateTemplate.prototype.add = function add(type, content, inline) {\n  let str = '';\n  if (type === 'inline') {\n    str = `<li>${content}</li>`;\n  } else if (type === 'block') {\n    if (content instanceof Array) {\n      str = `<li>${inline || ''}${content.map(block => block).join('')}</li>`;\n    } else {\n      str = `<li>${inline || ''}${content}</li>`;\n    }\n  } else if (type === 'blockquote') {\n    if (content instanceof Array && content.length > 0) {\n      str = `${inline || ''}${content.map(block => `<p>${block}</p>`).join('')}`;\n    } else {\n      str = inline;\n    }\n  }\n  this._content.push(str);\n};\n\nCreateTemplate.prototype.get = function get() {\n  if (this._type === 'ul' || this._type === 'ol') {\n    return `<${this._type}${this._start && this._start > 0 ? ` start=\"${this._start}\"` : ''}>${this._content.join('')}</${this._type}>`;\n  }\n  return `<${this._type}><p>${this._content.join('\\n')}</p></${this._type}>`;\n};\n\nfunction backspace(content) {\n  const reg = /(?:^|\\n)([\\t ]+)/g;\n  const match = reg.exec(content);\n  let result = content;\n  if (match) {\n    const spaceNum = match[1].length;\n    const spaceReg = new RegExp(`(?:^|\\n)([\\\\t ]{${spaceNum}})`, 'g');\n    result = content.replace(spaceReg, '\\n');\n  }\n  return result;\n}\n\n// 根据块级和行级元素制造内容数组\nfunction makeContent(inlineContent, blockContent) {\n  const content = [];\n  if (inlineContent) {\n    content.push(inlineContent);\n  }\n  if (blockContent) {\n    content.push(...(blockContent\n    .split(/\\n[\\t ]*\\n(?=[ ]{3,})/)\n    .filter((block) => {\n      if (block) return true;\n      return false;\n    })\n    .map((block) => {\n      const result = backspace(block);\n      return parse(result);\n    })));\n  }\n  return content;\n}\n\nfunction unmatchedString(string, nowrap) {\n  let str = string;\n  if (!str) return '';\n  str = str.replace(/^\\n[\\t \\n]*/, '');\n  if (nowrap) {\n    return processInline(processHTMLEncoding(str));\n  }\n  return `<p>${processInline(processHTMLEncoding(str))}</p>`;\n}\n\n// process list\nfunction process(md, nowrap) {\n  let match = null;\n  let result = '';\n  const reg = new RegExp(regForList, 'g');\n  match = reg.exec(md);\n  if (!match) {\n    result = unmatchedString(md, nowrap);\n    return result;\n  }\n  let lastIndex = 0;\n  let nowIndex = reg.lastIndex;\n  let frontIndex = nowIndex - match[0].length;\n  let lastType = '';\n  let lastSymbol = '';\n  const template = new CreateTemplate();\n  while (match != null) {\n    const symbol = match[1];\n    let inlineContent = match[2];\n    const blockContent = match[3];\n    const suffix = match[4];\n    let type;\n    let start;\n    if (symbol === '+' || symbol === '-' || symbol === '*') { // 无序列表\n      type = 'ul';\n    } else if (symbol === '>') { // 引用\n      type = 'blockquote';\n    } else { // 有序列表\n      type = 'ol';\n      start = symbol.replace('.', '');\n    }\n\n    if (type !== lastType || lastIndex !== frontIndex || (type === 'ul' && symbol !== lastSymbol)) {\n      if (lastType) {\n        result += template.get();\n      }\n      template.create(type, start);\n    }\n    result += unmatchedString(md.substring(lastIndex, frontIndex)); // do nothing with unmatched string\n    inlineContent = backspace(inlineContent);\n    if (blockContent) {\n      inlineContent = parse(inlineContent);\n    } else {\n      inlineContent = parse(inlineContent, true);\n    }\n    if (blockContent && type !== 'blockquote') {\n      // 添加块级元素\n      template.add('block', makeContent(null, blockContent), inlineContent);\n    } else if (!blockContent && inlineContent && type !== 'blockquote') {\n      // 添加行级元素\n      if (!/\\n[\\t ]*\\n/.test(suffix)) {\n        template.add('inline', inlineContent);\n      } else {\n        // 对于行级元素,如果有空行意味着是块级元素\n        template.add('block', inlineContent);\n      }\n    } else if (type === 'blockquote') {\n      // 如果是引用,添加方式可能会有所不同\n      template.add('blockquote', makeContent(null, blockContent), inlineContent);\n    }\n\n    match = reg.exec(md);\n    if (match) {\n      lastType = type;\n      lastSymbol = symbol;\n      lastIndex = nowIndex;\n      nowIndex = reg.lastIndex;\n      frontIndex = nowIndex - match[0].length;\n    } else {\n      result += template.get();\n      result += unmatchedString(md.substring(nowIndex));\n    }\n  }\n  return result;\n}\n\nexport default process;\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/block/List.js","/**\n * transform *** or --- or * * * to <hr></hr>\n * @module  features/block/SplitLine\n * @author jeffwcx cunxuanwang@163.com\n */\n\nconst regStr = '(^|\\\\n)[\\\\t ]*?([*|-][\\\\t ]*){3,}?(?:\\\\n|$)';\n\nfunction processSplitLine(section) {\n  const reg = new RegExp(regStr, 'g');\n  return section.replace(reg, (match, prefix) => `${prefix || ''}<hr></hr>`);\n}\n\nexport default { reg: regStr, process: processSplitLine };\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/block/SplitLine.js","\nimport { trimForArray, processInline } from '../../helper';\n\nconst regStr = '(?:^|\\\\n)([^|\\\\n]*(?:\\\\|[^|\\\\n]*)+\\\\|?)\\\\n((?:\\\\:?-{3,}\\\\:?)?(?:[\\\\t ]*\\\\|[\\\\t ]*(?:\\\\:?-{3,}\\\\:?)?)+[\\\\t ]*\\\\|?)((?:\\\\n[^|\\n]*(?:\\\\|[^|\\n]*)+\\\\|?)*)';\n\nfunction template(cols, rows) {\n  return `<table>\n    <thead>\n      <tr>\n      ${cols.map(col => `<th${col.align && ` align=\"${col.align}\"`}>${col.colName}</th>`).join('')}\n      </tr>\n    </thead>\n    <tbody>\n      ${rows.map(row =>\n        `<tr>${cols.map((col, index) =>\n          `<td${col.align && ` align=\"${col.align}\"`}>${row[index]}</td>`).join('')}</tr>`).join('')}\n    </tbody>\n  </table>`;\n}\n\nfunction trimBlank(item) {\n  return /^\\s*$/g.test(item);\n}\n\nfunction processTable(section) {\n  const reg = new RegExp(regStr, 'g');\n  return section.replace(reg, (match, m1, m2, m3) => {\n    let cols = m2.split('|');\n    let colNames = m1.split('|');\n    let rows = m3.split('\\n');\n    cols = trimForArray(cols, trimBlank);\n    colNames = trimForArray(colNames);\n    rows = trimForArray(rows);\n    if (cols.length > 1) {\n      const colInfo = [];\n      const rowsInfo = [];\n      let hasEmpty = false;\n\n      for (let i = 0; i < cols.length; i += 1) {\n        let colStyle = cols[i];\n        const colName = colNames[i];\n        if (!colStyle) {\n          hasEmpty = true;\n          break;\n        }\n        colStyle = colStyle.trim();\n        const left = colStyle.substr(0, 1) === ':';\n        const right = colStyle.substr(-1) === ':';\n        let align = '';\n        if (left && !right) {\n          align = 'left';\n        } else if (!left && right) {\n          align = 'right';\n        } else if (left && right) {\n          align = 'center';\n        }\n        colInfo.push({\n          colName: processInline(colName.trim()),\n          align,\n        });\n      }\n      if (hasEmpty) {\n        return match;\n      }\n      rows = trimForArray(rows, trimBlank);\n      for (let j = 0; j < rows.length; j += 1) {\n        let rowArr = rows[j].split('|');\n        rowArr = trimForArray(rowArr);\n        rowArr = rowArr.map(item => processInline(item.trim()));\n        rowsInfo.push(rowArr);\n      }\n      return template(colInfo, rowsInfo);\n    }\n    return match;\n  });\n}\n\n\nexport default { reg: regStr, process: processTable };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/block/Table.js","/**\n * transform two blank chars to <br />\n * @module features/inline/Br\n * @author jeffone cunxuanwang@163.com\n */\n\nconst regStr = '[ ]{2}(\\\\n|$)';\n\nfunction processBr(source) {\n  const reg = new RegExp(regStr, 'g');\n  return source.replace(reg, '<br />');\n}\n\nexport default { reg: regStr, process: processBr };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/Br.js","/**\n * transform :+1: to Emoji Graphic\n */\n\nimport { htmlTemplate } from '../../helper';\nimport config from '../../config';\n\nconst regStr = ':([\\\\w\\\\d\\\\+-]+):';\n\nfunction getHTML(content, source) {\n  return `<img alt=\"${source}\" width=\"20\" height=\"20\" src=\"${config.emoji.path}${config.emoji.nameFormat(content)}.${config.emoji.ext}\">`;\n}\n\nfunction processEmoji(source) {\n  const reg = new RegExp(regStr, 'g');\n  return source.replace(reg, (match, m1) => htmlTemplate(getHTML, m1, match));\n}\n\nexport default { reg: regStr, process: processEmoji };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/Emoji.js","/**\n * transform ![]() -> <img/>\n * tranform []() -> <a></a>\n * tranfrom !?[][] -> <img> or <a>\n */\nimport { getPredefined, htmlTemplate } from '../../helper';\n\nconst regStr = '(?:(!)?\\\\[([^\\\\[\\\\n]*)\\\\](?:(?:\\\\(([^\\\\(\\\\n)]*)\\\\))|(?:\\\\[([^\\\\(\\\\n)]*)\\\\])))';\nconst referReg = '^\\\\s{0,3}\\\\[([^\\\\n\\\\[]+)\\\\]:[\\\\t ]+<?(.+)>?[\\\\t ]+\\\\n?[\\\\t ]*(?:(?:([\"\\'])(.*?)\\\\3)?|(?:\\\\(.*?\\\\))?)[\\\\t ]*$';\n\nfunction getImage(alt, src, title) {\n  return `<img${alt && ` alt=\"${alt}\"`}${title && ` title=\"${title}\"`} src=\"${src || ''}\" />`;\n}\n\nfunction getLink(text, href, title) {\n  return `<a${title && ` title=\"${title}\"`} href=\"${href || ''}\" target=\"_blank\">${text || ''}</a>`;\n}\n\nfunction processImageLink(section) {\n  const reg = new RegExp(regStr, 'g');\n  return section.replace(reg, (match, m1, m2, m3, m4) => {\n    if (m4 === undefined) {\n      // no refer\n\n      let arr = [];\n      if (m3) {\n        arr = m3.split(/[\\t ]+/);\n      }\n      if (arr[1]) {\n        // remove the tag wrapped title\n        arr[1] = arr[1].replace(/[\"']/g, '');\n      }\n      return m1 ? htmlTemplate(getImage, m2, arr[0], arr[1]) : htmlTemplate(getLink, m2, arr[0], arr[1]);\n    }\n    const matchArr = getPredefined()[referReg] || [];\n    // first way to find match\n    if (m4 === '') {\n      for (let i = 0; i < matchArr.length; i += 1) {\n        const tmp = matchArr[i];\n        if (tmp[1].toLowerCase() === m2.toLowerCase()) {\n          return m1 ? htmlTemplate(getImage, m2, tmp[2], tmp[4]) : htmlTemplate(getLink, m2, tmp[2], tmp[4]);\n        }\n      }\n    } else {\n      for (let i = 0; i < matchArr.length; i += 1) {\n        const tmp = matchArr[i];\n        if (tmp[1].toLowerCase() === m4.toLowerCase()) {\n          return m1 ? htmlTemplate(getImage, m2, tmp[2], tmp[4]) : htmlTemplate(getLink, m2, tmp[2], tmp[4]);\n        }\n      }\n    }\n    return match;\n  });\n}\n\nexport default { pre: new RegExp(referReg, 'mg'), reg: regStr, process: processImageLink };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/ImageLink.js","/**\n * implementation of inline code\n * @module features/inlinecode\n * @author jeffone cunxuanwang@163.com\n */\n\nimport { htmlTemplate, htmlEncode } from '../../helper';\n\nconst TAG = '`';\n\nfunction codeTemplate(content) {\n  return `<code>${content}</code>`;\n}\n\n\nfunction processInlineCode(section) {\n  const arr = [];\n  const lines = section.split('\\n');\n  return lines.map((line) => {\n    let start = 0; // the start index of inline code str\n    let end = 0; // the end index of inline code str\n    let first = 0; // the unmatched string's first index\n    let last = 0; // the unmatched string's last index\n    let result = '';\n    for (let i = 0; i < line.length; i += 1) {\n      if (line[i] === TAG && (arr.length === 0 || arr.length === 1)) {\n        let str = '';\n        if (arr.length === 0) {\n          start = i;\n          last = i;\n          result += line.substring(first, last);\n          first = last;\n          while (line[i] === TAG) {\n            str += TAG;\n            i += 1;\n          }\n          arr.push(str);\n        } else {\n          while (line[i] === TAG) {\n            str += TAG;\n            i += 1;\n          }\n          if (str === arr[0]) {\n            end = i;\n            const count = end - start;\n            const contentNum = count - (arr[0].length * 2);\n            // when the content between tags exsist\n            if (contentNum > 0) {\n              const content = htmlTemplate(codeTemplate, htmlEncode(line.substr(start + arr[0].length, contentNum)));\n              result += content;\n              first = end;\n              arr.pop();\n            }\n          }\n        }\n        // the while will make the index + 1\n        i -= 1;\n      }\n    }\n\n    result += line.substr(first);\n    return result;\n  }).join('\\n');\n}\n\nexport default { process: processInlineCode };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/InlineCode.js","/**\n * transform ** ** or -- -- to bold text\n * transform * * or - - to itatic text\n * @module  features/inline/ItaticBold\n * @author jeffone cunxuanwang@163.com\n */\nimport { processInline, processHTMLEncoding } from '../../helper';\n\nconst regStr = '([*_]{1,2})(?![\\\\t ])([\\\\s\\\\S]*?[^ \\\\t])\\\\1';\n\nfunction getHTML(type, content) {\n  return `<${type}>${content}</${type}>`;\n}\n\nfunction processItaticBold(section) {\n  const reg = new RegExp(regStr, 'g');\n  return section.replace(reg, (match, m1, m2) => {\n    let type;\n    if (m1.length === 1) {\n      type = 'em';\n    } else {\n      type = 'strong';\n    }\n    const content = processInline(processHTMLEncoding(m2));\n    return getHTML(type, content);\n  });\n}\n\nexport default { reg: regStr, process: processItaticBold };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/ItaticBold.js","/**\n * tranform ~~ ~~ to strikethrough\n * @module features/inline/Strikethrough\n * @author jeffone cunxuanwang@163.com\n */\n\nimport { htmlTemplate } from '../../helper';\n\nconst regStr = '(?:~~)(?![\\\\t \\\\n])([^\\\\n]*?\\\\n?[^\\\\n]*?[^\\\\t \\\\n])(?:~~)';\n\nfunction getHTML(content) {\n  return `<span style=\"text-decoration:line-through\">${content || ''}</span>`;\n}\n\nfunction processStrikeThrough(source) {\n  const reg = new RegExp(regStr, 'g');\n  return source.replace(reg, (match, m1) => htmlTemplate(getHTML, m1.replace('\\n', ' ')));\n}\n\nexport default { reg: regStr, process: processStrikeThrough };\n\n\n\n// WEBPACK FOOTER //\n// ./src/features/inline/Strikethrough.js","/**\n * export module\n */\n\nimport Extendown from './core';\nimport config from './config';\nimport { block, inline } from './features';\n\n/**\n * Parse Mardown text to html\n * @param {String} md - Mardown text\n * @return {String} html\n * @example\n * var md = \"`inline code`\";\n * Extendown.parse(md); // \"<code>inline code</code>\"\n */\nfunction parse(md) {\n  const Parser = new Extendown(md);\n  return Parser.getHTML();\n}\n\nconst INLINE = 'inline';\nconst BLOCK = 'block';\n\nfunction extend(type, feature) {\n  if (feature && typeof feature.process === 'function') {\n    if (type === INLINE) inline.push(feature);\n    else if (type === BLOCK) {\n      if (typeof feature.reg !== 'string') throw new TypeError('The Block feature\\'s \"reg\" property must be string');\n      block.push(feature);\n    } else throw new TypeError('Do not support such a type to extend!');\n  } else {\n    throw new TypeError('The feature param must exist and process property must be a function');\n  }\n}\n\nexport {\n  parse,\n  Extendown,\n  config,\n  extend,\n  INLINE,\n  BLOCK,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}